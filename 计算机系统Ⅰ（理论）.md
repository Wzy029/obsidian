# 1  二进制编码

## 1.2  进制转换
### 十进制转R进制
	整数：低到高，x%R
	小数：高到低，小数部分*R的整数部分
### R进制转十进制
	R^n...R^3 R^2 R^1 R^0 R^-1 R^-2...

### * 二进制转十六进制
	整数：低到高，每四位→一个十六进制数字，不足时高位补0
	小数：高到低，每四位→一个十六进制数字，不足时低位补0

## 1.3  数值型数据的编码表示

**定点数**
	小数点位置固定
	机器数：数值型数据编码后的数
	真值：机器数现实中的数
**浮点数**
	小数点位置可浮动，可用定点小数+定点整数表示

### 1.3.1  定点数编码表示方法
#### 原码
	符号位+数值
	
> [!warning] disadvantage
> 0的表示不唯一
#### 补码
	符号位+真值的模2
	- 正数：0 + 真值
	- 负数：1 + （取反+1）
#### 反码
	- 正数：不变
	- 负数：取反


#### 移码
	浮点数：符号位   阶（指数，定点整数）  尾数（定点小数）
	- 偏置常数（bias），实际指数+bias=阶
	
> [!NOTE] example1
> 0 10010 011，bias=15
> 0：+
> (10010)<sub>2</sub>=(18)<sub>10</sub> ,  E=18-bias=3, ---2<sup>3</sup>
> 011 : (1.011)<sub>2</sub>=(1.375)<sub>10</sub>
> float=1.375\*8=11

### 1.3.2  整数的表示
	- 无符号整数(unsigned integer)
	- 带符号整数(signed integer)
	- ux → x : 
		- 直接加符号位
		- 超过表示范围，-1
	- x → ux : 
		- 正数：直接转换
		- 负数：补码二进制（十进制则是2^N+ux）

### 1.3.3  浮点数的表示

#### 表示范围
![[Pasted image 20250303165412.png]]
	
	只要尾数为零，不管阶码是什么，值都为0——机器零
#### 规格化
	本质为，令尾数统一为1.f而不是0.f

#### IEEE 754浮点数标准
	两种基本浮点数格式：32位单精度、64位双精度
	
![[Pasted image 20250303170358.png|475]]
	
	隐藏位：尾数中缺省的第一位1
	n为阶码位数，bias=2^(n-1)-1, 32位：127；64位：1023
##### 浮点数分类
	- 全0阶码全0尾数：±0
	- 全0阶码非0尾数：非规格化数
	- 全1阶码全0尾数：±∞
	- 全1阶码非0尾数：NaN(Not a Number)非数
		- 静止的NaN(quiet)
		- 通知的NaN(signaling)
	- 阶码非全0且非全1：规格化非0数

![[Pasted image 20250303171052.png|550]]

### 1.3.4  十进制数的二进制编码表示
	- 0~9对应的ASCII码字符表示
	- 二进制编码(Binary Coded Decimal, BCD)
		- 有权BCD码：最常用的为8421码(NBCD码)，4位二进制对应一个十进制，如 0111 0010 ——72
		- 无权BCD码
			- 余3码：8421码+0011，即把十进制数字+3再转换
			- 格雷码(Gray Code)：任意两个相邻编码只有一位二进制位不同

![[Pasted image 20250303172323.png]]

## 1.4  非数值型数据的编码表示
### 1.4.1  逻辑值的表示
	- 某些时候需要将一个n位数据看成由n个一位数据，每个取值为0/1，采用这种方式时，数据就被认为是逻辑数据
	- n位二进制数可以表示n个逻辑值
	- 逻辑数据只能参加逻辑运算，按位进行
	- 与数值型数据在形式上无差异，通过指令操作码类型识别；逻辑运算指令处理的是逻辑数据

![[Pasted image 20250303173646.png]]
### 1.4.2  西文字符的表示
	所有字符的集合构成字符集，该字符集的代码表简称码表
	目前使用最广泛的是ASCII码

### 1.4.3  汉字的表示
	- 汉字的输入码：汉字必须用相应的按键编码，又称外码
	- 字符集与汉字内码
	- 汉字字模的点阵码和轮廓描述

## 1.5  数据的宽度和存储

### 1.5.1  数据的宽度和单位
	- 1byte=8bit, 西文8bit, 中文16bit
	- 机器字长（平时说的32位64位机器）：CPU内部定点运算数据通路的宽度
		- 数据通路：CPU执行指令过程中数据流经的路径以及路径上的部件
	- 主存容量使用的单位
		- K, M, G, T, P, E, Z, Y

![[Pasted image 20250303175118.png|475]]

	- 主频和带宽使用的单位
		- b/s, kb/s, Mb/s, Gb/s, Tb/s

![[Pasted image 20250303175145.png|400]]

	- 硬盘和文件使用的单位
		- 为避免歧义，前缀字母后加i，KiB=2^10字节，MiB=2^20字节

### 1.5.2  数据的存储和排列顺序
	最低有效位(Least Significant Bit, LSB)
	最高有效位(Most Significant Bit, MSB)
	- 大端方式：从MSB开始存放
	- 小端方式：从LSB开始存放

---
# 2  数字逻辑基础
## 2.1  逻辑门和数字抽象
### 2.1.1  逻辑门
	也称门电路，是最基础的数字电路

- **真值表**
- **逻辑表达式**
	逻辑变量：输入和输出信号
	逻辑运算符
- **与门**：全1才1，表示乘![[Pasted image 20250305143412.png|71]]
- **或门**：有1则1，表示加![[Pasted image 20250305143443.png|66]]
- **非门**：反相器，<sup>—</sup>![[Pasted image 20250305143505.png|70]]
- **与非门**：`!(A ∧ B)` 有0则1, ![[Pasted image 20250305143524.png|64]]
- **或非门**：`!(A ∨ B)` 全0才1, ![[Pasted image 20250305143538.png|86]]
- **异或门**：`A ⊕ B` 不同则1，⊕  ![[Pasted image 20250305143755.png|87]]
- **同或门**（异或非门/等价关系门）：`!(A ⊕ B)`,`=` 相同则1，⊙  ![[Pasted image 20250305143825.png|85]]
（）> NOT > AND > OR
### 2.1..2  数字抽象
	将物理属性的无穷多个取值映射到两个逻辑值0/1
**数字系统中**：
	高态（high）低态（low）→0/1
	- 正逻辑：0低1高
	- 负逻辑：0高1低
	- * 不确定状态：低-高转换中间态（电路不能识别为0也不能识别为1）
	 ![[Pasted image 20250305145020.png|200]]![[Pasted image 20250305145344.png|250]]![[Pasted image 20250305151413.png]]
	 ![[Pasted image 20250305145505.png|375]]![[Pasted image 20250305145644.png|450]]![[Pasted image 20250305145710.png|250]]
	 输入电压主要由晶体管开关阈值电压决定
	 输出电压主要由电阻决定

### 2.1.3  CMOS晶体管
#### MOS晶体管
- n沟道晶体管（NMOS）V<sub>gs</sub>低, 断开；V<sub>gs</sub>高, 导通
 ![[Pasted image 20250305145944.png|150]]

- p沟道晶体管（PMOS）V<sub>gs</sub><0, 导通；V<sub>gs </sub>>=0, 断开
![[Pasted image 20250305150100.png|150]]
#### CMOS
- 晶体管
	互补形式共用一对NMOS和PMOS
	最简单的CMOS电路：非门
	
![[Pasted image 20250305152007.png|300]]
- 传输门
	![[Pasted image 20250305185158.png|144]]
	传输数字逻辑信号/阻断数字逻辑信号的传输

### 2.1.4  CMOS电路电气特性
##### 转换时间（transition time）
- 数字电路的输出信号从一种状态转换到另一种状态所需的时间
- 理想：零时间转换
- 低态到高态的转换时间：上升时间t<sub>r</sub>（rise time）
  高态到低态的转换时间：下降时间t<sub>f</sub>（fall time）

##### 传输延迟（propagation dalay）
- 从输入信号变化到输出信号变化所需的时间
- **信号通路（signal path）**：从一个输入信号到输出信号所经历的电器通路

##### 功率损耗
- **静态功耗**：输出信号保持不变时的功率损耗，CMOS静态功耗通常很低
- **动态功耗**：输出信号高低状态转换时的功率损耗
	- P<sub>D</sub> = (C<sub>PD</sub>+C<sub>L</sub>) • V<sup>2</sup><sub>CC</sub>  • f
	- 降低Vcc可以有效降低动态功耗

## 2.2  布尔代数
### 2.2.1  公理系统
![[Pasted image 20250310134821.png|425]]
### 2.2.2  定理
**1.单变量定理**
![[Pasted image 20250310134909.png|275]]
**2.二变量和三变量定理**
![[Pasted image 20250310134947.png|500]]
**3.n变量定理**
![[Pasted image 20250310135519.png|500]]

**\* 对偶式**
	F中•与+互换，0与1互换，得到F<sub>D</sub>与F互为对偶式
	若两个逻辑表达式相等，它们的对偶式也相等

## 2.3 逻辑关系描述
### 2.3.1 逻辑函数
	反映输入变量和输出变量直接逻辑关系
- 每个逻辑函数都有一组确定的输出

> [!example] example
> F(X, Y)有2<sup>4</sup>组不同的输出组合，对应16个不同逻辑函数F<sub>i</sub>(X, Y)

### 2.3.2 真值表与波形图

### 2.3.3 逻辑函数的标准表示
**乘积项**：![[Pasted image 20250310140741.png|247]]
**求和项**：![[Pasted image 20250310140825.png|247]]
**“与-或”表达式/积之和（SOP）表达式**：![[Pasted image 20250310140943.png|122]]
**“或-与”表达式/和之积（POS）表达式**：![[Pasted image 20250310141029.png|167]]
**标准乘积项（标准求和项）**：每个逻辑变量*出现*且仅出现一次的乘积项（求和项）
	标准乘积项也称**最小项**，n个变量的最小项有2<sup>n</sup>个
	标准求和项也称**最大项**，n个变量的最大项有2<sup>n</sup>个

## 2.4  逻辑函数的化简与变换
### 2.4.1  代数法化简
常用方法：
![[Pasted image 20250310160302.png|550]]

### 2.4.2  卡诺图法化简
- 一个n变量逻辑函数的卡诺图是一个包含2<sup>n</sup>单元的矩阵图
- 0表示反变量，1表示原变量
- 编号按照*格雷码*顺序排列
- 输出为1则成为“1单元”
- 如果有2<sup>i</sup>个“1单元”相邻[^1]，则对应的最小项可以合并成一个乘积项，并消去i个不同变量

[^1]: 上下、左右、首尾都是相邻的单元

![[Pasted image 20250310161012.png]]

> [!warning] NOTICE
> 行列的编号按照二进制顺序排列

![[Pasted image 20250310161345.png|600]]

**卡诺圈**：用一个方框来标注可以合并的最小项组合
![[Pasted image 20250310161736.png|279]]
	化简后的表达式：F(X, Y, Z) = Y•Z+X•Z+X•Y

**蕴涵项（implicant）**：一个乘积项覆盖了逻辑函数的一个或多个最小项
**质蕴涵项（prime implicant）**：某个蕴涵项不能被该函数的其他蕴涵项覆盖
**实质蕴涵项（essential prime implicant）**：质蕴涵项覆盖的最小项里至少有一个最小项没有被其他质蕴涵项覆盖
**覆盖（cover）**：逻辑函数的所有最小项都被一组质蕴涵项覆盖，则该组质蕴涵项称为函数的一个覆盖
**最小覆盖**：一个覆盖中的质蕴涵项数是最少的，质蕴涵项中的变量总数也是最少的
	对应的逻辑表达式就是**最简逻辑表达式**

### 2.4.3  逻辑函数变换
	数组电路实现技术中，与非门和或非门比与门和或门的执行速度快
	因此要将“与-或”表达式转换为“与非=与非”表达式

**通常的方法**：布尔代数的还原律，整体两次取反，再用德摩根定理转换下层的取反运算

> [!example] example
> ![[Pasted image 20250317133847.png]]
> ![[Pasted image 20250317133902.png]]

# 3  组合逻辑电路
## 3.1  组合逻辑电路概述
	数字逻辑电路被划分为组合逻辑电路和时序逻辑电路
**组合逻辑电路**：输出值仅依赖于当前输入值
**时序逻辑电路**：输出值不仅依赖于当前输入值，还与之前的输入值有关

### 3.1.1  组合逻辑电路构成规则
- 每个元件本身是组合逻辑电路
- 不存在一个结点同时是两个元件的输出结点，或同时被两个元件的输出信号所驱动
- 不存在从一个输出端经若干元件和中间结点连到一个输出端，然后又从该输出端连到该输入端的回路（循环）

### 3.1.2  逻辑电路图
**扇入系数Fan in** ：一个逻辑门的输入端个数（最大值）
**扇出系数Fan out**：输出端信号所能驱动的下一级门的数量（最大值）

**逻辑运算的优先级**：`非` > `与/与非` > `异或/同或` > `或/或非`, 电路中也按照优先级接电路

**n位逻辑值的运算**：无须画出所有门电路，标注位数即可![[Pasted image 20250317145411.png|425]]

### 3.1.3  两级和多级组合逻辑电路
**门延迟**：从逻辑门的输入信号改变开始，到输出信号发生改变所用的时间
**与门、或门的延迟**：2ns，**异或门**：3ns

设计时权衡是选择延迟更短的两级电路，还是占用集成电路物理空间更少的多级电路
（速度和成本之间权衡）

### 3.1.4  组合逻辑电路设计
- 需求分析，确定输入输出变量，画真值表
- 根据真值表输入输出关系，推导逻辑表达式
- 对逻辑表达式进行变换以满足应用场景的具体实现要求，画出逻辑电路图、时序波形图，并对电路进行时序分析

**无关项/任意项**：某个输入组合的输出值可以任意/某些输入组合不可能出现，将这些情况下输入组合对应的最小项或最大项称为无关项或有关项

### 3.1.5  非法值和高阻态
**1.非法值**
![[Pasted image 20250317152105.png|122]]
B=1，无论A是多少，F都会同时被高电平和低电平驱动，可能使电路发热损坏

**2.高阻态**
**三态门/三态缓冲器**：输出为0/1/高阻态（Z）
![[Pasted image 20250317152410.png|99]]
使能端E，E有效时，输出就是1/0；E无效时，输出为Z
3.11a中，E=1有效；3.11b中，E=0有效
## 3.2  典型组合逻辑部件设计
### 3.2.1  译码器和编码器
**1.译码器(decoder)**
`输入端>输出端`
输入端：一种二进制编码，如地址码、指令码
输出端：单热点(one-hot)编码

最简单的输入输出关系：若输入的二进制编码值为x，则第x条输出线为1，其余全为0 
    输入n位，输出有2<sup>n</sup>个，输出为2<sup>n</sup>取1，称为n-2<sup>n</sup>译码器

**用途**：
	**地址译码**，如主存中的地址译码器根据输入的地址选择对应的一个输出线进行驱动，从而选中所在主存单元进行读写
	**对指令操作码的译码**，使不同操作码得到不同控制信号，以正确控制操作元件的动作

**2.编码器**
`输出端>输入端`
输入端：多个独立信号
输出端：独立信号中的一个有效信号的编码

最常见的：2<sup>n</sup>-n编码器，也称二进制编码器
	每次只有一个I<sub>i</sub>为1，其余都为0
	![[Pasted image 20250317155040.png|350]]
	![[Pasted image 20250317155055.png|375]]

**优先权编码器**：允许有多个输入同时为1，但只对优先级最高的输入进行编码输出
	如一个3位优先权编码器的优先级顺序位I<sub>0</sub>>I<sub>1</sub>>I<sub>2</sub>>I<sub>3</sub>>I<sub>4</sub>>I<sub>5</sub>>I<sub>6</sub>>I<sub>7</sub>
	![[Pasted image 20250317154854.png|450]]

### 3.2.2  多路选择器和多路分配器 
**1.多路选择器**
	也称**复用器**或**数据选择器**，MUX/mux
	从多个可能的输入中选择一个直接输出
**2.多路分配器**
	把唯一的输入发送到多个输出端中的一个。DEMUX（dmux）/DMUX（dmux）

### 3.2.3  半加器和全加器
**1.半加器（Half Adder，HA）**
	加数A，B，和为F，向高位的进位为Cout
	F = A ⊕ B
	Cout = A • B
	![[Pasted image 20250319144932.png|250]]
**2.全加器（Full Adder，FA）**
	加数A，B，和为F，低位进位为Cin，向高位的进位为Cout
	F = A ⊕ B ⊕ Cin
	Cout = A • B + A • Cin + B • Cin
	![[Pasted image 20250319144951.png|250]]

## 3.3  组合逻辑电路时序分析
### 3.3.1  传输延迟和最小延迟
t<sub>pHL</sub>: 输入信号的变化 引起 输出信号 从高态变化到低态（下降沿）的时间，称为**下降沿电路延迟**
t<sub>pLH</sub>: 输入信号的变化 引起 输出信号 从低态变化到高态（上升沿）的时间，称为**上升沿电路延迟**
![[Pasted image 20250324133946.png|204]]
组合逻辑电路的时序特征：
**传输延迟T<sub>pd</sub>**：从输入端的变化开始到任何一个输出开始发生改变所需的最长时间
**最小延迟T<sub>cd</sub>**：从输入端的变化开始到任何一个输出开始发生改变所需的最短时间
关键路径：一个组合电路在输入和输出之间经过的最长路径